{"version":3,"sources":["webpack:///webpack/bootstrap 17479b9631cefedef0a7","webpack:///./public/assets/scripts/sockets/Socket.js","webpack:///./public/assets/scripts/App.js"],"names":["module","exports","Socket","document","getElementById","onclick","disableInputButtons","isPublicModerator","connection","open","value","showRoomURL","disabled","becomePublicModerator","RTCMultiConnection","socketURL","socketMessageEvent","session","audio","video","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","videosContainer","onstream","event","appendChild","mediaElement","play","setTimeout","publicRoomsDiv","looper","getPublicModerators","array","innerHTML","forEach","moderator","userid","li","createElement","button","id","join","sessionid","insertBefore","firstChild","roomid","roomHashURL","roomQueryStringURL","html","roomURLsDiv","style","display","params","r","d","s","decodeURIComponent","replace","match","search","window","location","exec","substring","localStorage","getItem","token","onkeyup","setItem","hashString","hash","length","indexOf","reCheckRoomPresence","checkPresence","isRoomExists","require"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AChEAA,OAAOC,OAAP,GAAkB,SAASC,MAAT,GAAkB;AAClC;AACA;AACA;;AAEAC,WAASC,cAAT,CAAwB,kBAAxB,EAA4CC,OAA5C,GAAsD,YAAW;AAC/DC;;AAEA,QAAIC,oBAAoB,IAAxB;AACAC,eAAWC,IAAX,CAAgBN,SAASC,cAAT,CAAwB,SAAxB,EAAmCM,KAAnD,EAA0DH,iBAA1D;;AAEAI,gBAAYR,SAASC,cAAT,CAAwB,SAAxB,EAAmCM,KAA/C;AACD,GAPD;;AASAP,WAASC,cAAT,CAAwB,mBAAxB,EAA6CC,OAA7C,GAAuD,YAAW;AAChEC;;AAEA,QAAIC,oBAAoB,KAAxB;AACAC,eAAWC,IAAX,CAAgBN,SAASC,cAAT,CAAwB,SAAxB,EAAmCM,KAAnD,EAA0DH,iBAA1D;AACAJ,aAASC,cAAT,CAAwB,yBAAxB,EAAmDQ,QAAnD,GAA8D,KAA9D;;AAEAD,gBAAYR,SAASC,cAAT,CAAwB,SAAxB,EAAmCM,KAA/C;AACD,GARD;;AAUAP,WAASC,cAAT,CAAwB,yBAAxB,EAAmDC,OAAnD,GAA6D,YAAW;AACtE,SAAKO,QAAL,GAAgB,IAAhB;;AAEAJ,eAAWK,qBAAX;AACD,GAJD;;AAMA;AACA;AACA;;AAEA,MAAIL,aAAa,IAAIM,kBAAJ,EAAjB;;AAEA;AACAN,aAAWO,SAAX,GAAuB,GAAvB;;AAEA;AACA;;AAEAP,aAAWQ,kBAAX,GAAgC,0BAAhC;;AAEAR,aAAWS,OAAX,GAAqB;AACnBC,WAAO,IADY;AAEnBC,WAAO;AAFY,GAArB;;AAKAX,aAAWY,cAAX,CAA0BC,SAA1B,GAAsC;AACpCC,yBAAqB,IADe;AAEpCC,yBAAqB;AAFe,GAAtC;;AAKAf,aAAWgB,eAAX,GAA6BrB,SAASC,cAAT,CAAwB,kBAAxB,CAA7B;AACAI,aAAWiB,QAAX,GAAsB,UAASC,KAAT,EAAgB;AACpClB,eAAWgB,eAAX,CAA2BG,WAA3B,CAAuCD,MAAME,YAA7C;AACAF,UAAME,YAAN,CAAmBC,IAAnB;AACAC,eAAW,YAAW;AACpBJ,YAAME,YAAN,CAAmBC,IAAnB;AACD,KAFD,EAEG,IAFH;AAGD,GAND;;AAQA,MAAIE,iBAAiB5B,SAASC,cAAT,CAAwB,cAAxB,CAArB;AACA,GAAC,SAAS4B,MAAT,GAAkB;AACjB;AACAxB,eAAWyB,mBAAX,CAA+B,UAASC,KAAT,EAAgB;AAC7CH,qBAAeI,SAAf,GAA2B,EAA3B;AACAD,YAAME,OAAN,CAAc,UAASC,SAAT,EAAoB;AAChC;AACA;AACA,YAAGA,UAAUC,MAAV,IAAoB9B,WAAW8B,MAAlC,EAA0C,OAHV,CAGkB;;AAElD,YAAIC,KAAKpC,SAASqC,aAAT,CAAuB,IAAvB,CAAT;AACAD,WAAGJ,SAAH,GAAe,QAAQE,UAAUC,MAAlB,GAA2B,kBAA1C;;AAEA,YAAIG,SAAStC,SAASqC,aAAT,CAAuB,QAAvB,CAAb;AACAC,eAAOC,EAAP,GAAYL,UAAUC,MAAtB;AACAG,eAAOpC,OAAP,GAAiB,YAAW;AAC1B,eAAKO,QAAL,GAAgB,IAAhB;AACAJ,qBAAWmC,IAAX,CAAgB,KAAKD,EAArB;AACD,SAHD;AAIAD,eAAON,SAAP,GAAmB,gBAAnB;AACAI,WAAGZ,WAAH,CAAec,MAAf;;AAEA,YAAGJ,UAAUC,MAAV,IAAoB9B,WAAWoC,SAAlC,EAA6C;AAC3C;AACAH,iBAAO7B,QAAP,GAAkB,IAAlB;AACD;;AAEDmB,uBAAec,YAAf,CAA4BN,EAA5B,EAAgCR,eAAee,UAA/C;AACD,OAvBD;AAwBAhB,iBAAWE,MAAX,EAAmB,IAAnB;AACD,KA3BD;AA4BD,GA9BD;;AAgCA,WAAS1B,mBAAT,GAA+B;AAC7BH,aAASC,cAAT,CAAwB,kBAAxB,EAA4CQ,QAA5C,GAAuD,IAAvD;AACAT,aAASC,cAAT,CAAwB,mBAAxB,EAA6CQ,QAA7C,GAAwD,IAAxD;AACAT,aAASC,cAAT,CAAwB,SAAxB,EAAmCQ,QAAnC,GAA8C,IAA9C;AACD;;AAED;AACA;AACA;;AAEA,WAASD,WAAT,CAAqBoC,MAArB,EAA6B;AAC3B,QAAIC,cAAc,MAAMD,MAAxB;AACA,QAAIE,qBAAqB,aAAaF,MAAtC;;AAEA,QAAIG,OAAO,wCAAX;;AAEAA,YAAQ,wBAAwBF,WAAxB,GAAsC,oBAAtC,GAA6DA,WAA7D,GAA2E,MAAnF;AACAE,YAAQ,MAAR;AACAA,YAAQ,+BAA+BD,kBAA/B,GAAoD,oBAApD,GAA2EA,kBAA3E,GAAgG,MAAxG;;AAEA,QAAIE,cAAchD,SAASC,cAAT,CAAwB,WAAxB,CAAlB;AACA+C,gBAAYhB,SAAZ,GAAwBe,IAAxB;;AAEAC,gBAAYC,KAAZ,CAAkBC,OAAlB,GAA4B,OAA5B;AACD;;AAED,GAAC,YAAW;AACV,QAAIC,SAAS,EAAb;AAAA,QACAC,IAAI,oBADJ;;AAGA,aAASC,CAAT,CAAWC,CAAX,EAAc;AACZ,aAAOC,mBAAmBD,EAAEE,OAAF,CAAU,KAAV,EAAiB,GAAjB,CAAnB,CAAP;AACD;AACD,QAAIC,KAAJ;AAAA,QAAWC,SAASC,OAAOC,QAAP,CAAgBF,MAApC;AACA,WAAOD,QAAQL,EAAES,IAAF,CAAOH,OAAOI,SAAP,CAAiB,CAAjB,CAAP,CAAf;AACAX,aAAOE,EAAEI,MAAM,CAAN,CAAF,CAAP,IAAsBJ,EAAEI,MAAM,CAAN,CAAF,CAAtB;AADA,KAEAE,OAAOR,MAAP,GAAgBA,MAAhB;AACD,GAXD;;AAaA,MAAIP,SAAS,EAAb;AACA,MAAImB,aAAaC,OAAb,CAAqB3D,WAAWQ,kBAAhC,CAAJ,EAAyD;AACvD+B,aAASmB,aAAaC,OAAb,CAAqB3D,WAAWQ,kBAAhC,CAAT;AACD,GAFD,MAEO;AACL+B,aAASvC,WAAW4D,KAAX,EAAT;AACD;AACDjE,WAASC,cAAT,CAAwB,SAAxB,EAAmCM,KAAnC,GAA2CqC,MAA3C;AACA5C,WAASC,cAAT,CAAwB,SAAxB,EAAmCiE,OAAnC,GAA6C,YAAW;AACtDH,iBAAaI,OAAb,CAAqB9D,WAAWQ,kBAAhC,EAAoD,KAAKN,KAAzD;AACD,GAFD;;AAIA,MAAI6D,aAAaR,SAASS,IAAT,CAAcb,OAAd,CAAsB,GAAtB,EAA2B,EAA3B,CAAjB;AACA,MAAGY,WAAWE,MAAX,IAAqBF,WAAWG,OAAX,CAAmB,UAAnB,KAAkC,CAA1D,EAA6D;AAC3DH,iBAAa,EAAb;AACD;;AAED,MAAIxB,SAASO,OAAOP,MAApB;AACA,MAAG,CAACA,MAAD,IAAWwB,WAAWE,MAAzB,EAAiC;AAC/B1B,aAASwB,UAAT;AACD;;AAED,MAAGxB,UAAUA,OAAO0B,MAApB,EAA4B;AAC1BtE,aAASC,cAAT,CAAwB,SAAxB,EAAmCM,KAAnC,GAA2CqC,MAA3C;AACAmB,iBAAaI,OAAb,CAAqB9D,WAAWQ,kBAAhC,EAAoD+B,MAApD;;AAEA;AACA,KAAC,SAAS4B,mBAAT,GAA+B;AAC9BnE,iBAAWoE,aAAX,CAAyB7B,MAAzB,EAAiC,UAAS8B,YAAT,EAAuB;AACtD,YAAGA,YAAH,EAAiB;AACfrE,qBAAWmC,IAAX,CAAgBI,MAAhB;AACA;AACD;;AAEDjB,mBAAW6C,mBAAX,EAAgC,IAAhC;AACD,OAPD;AAQD,KATD;;AAWArE;AACD;AACF,CA9KD,C;;;;;;;;;ACAA,IAAIJ,SAAS,mBAAA4E,CAAQ,CAAR,CAAb;;AAEA5E;AACA,4B","file":"App.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 17479b9631cefedef0a7","module.exports =  function Socket() {\n  // ......................................................\n  // .......................UI Code........................\n  // ......................................................\n\n  document.getElementById('open-public-room').onclick = function() {\n    disableInputButtons();\n\n    var isPublicModerator = true;\n    connection.open(document.getElementById('room-id').value, isPublicModerator);\n\n    showRoomURL(document.getElementById('room-id').value);\n  };\n\n  document.getElementById('open-private-room').onclick = function() {\n    disableInputButtons();\n\n    var isPublicModerator = false;\n    connection.open(document.getElementById('room-id').value, isPublicModerator);\n    document.getElementById('become-public-moderator').disabled = false;\n\n    showRoomURL(document.getElementById('room-id').value);\n  };\n\n  document.getElementById('become-public-moderator').onclick = function() {\n    this.disabled = true;\n\n    connection.becomePublicModerator();\n  };\n\n  // ......................................................\n  // ..................RTCMultiConnection Code.............\n  // ......................................................\n\n  var connection = new RTCMultiConnection();\n\n  // by default, socket.io server is assumed to be deployed on your own URL\n  connection.socketURL = '/';\n\n  // comment-out below line if you do not have your own socket.io server\n  // connection.socketURL = 'https://rtcmulticonnection.herokuapp.com:443/';\n\n  connection.socketMessageEvent = 'getPublicModerators-demo';\n\n  connection.session = {\n    audio: true,\n    video: true\n  };\n\n  connection.sdpConstraints.mandatory = {\n    OfferToReceiveAudio: true,\n    OfferToReceiveVideo: true\n  };\n\n  connection.videosContainer = document.getElementById('videos-container');\n  connection.onstream = function(event) {\n    connection.videosContainer.appendChild(event.mediaElement);\n    event.mediaElement.play();\n    setTimeout(function() {\n      event.mediaElement.play();\n    }, 5000);\n  };\n\n  var publicRoomsDiv = document.getElementById('public-rooms');\n  (function looper() {\n    // connection.getPublicModerators(startsWith, callback)\n    connection.getPublicModerators(function(array) {\n      publicRoomsDiv.innerHTML = '';\n      array.forEach(function(moderator) {\n        // moderator.userid\n        // moderator.extra\n        if(moderator.userid == connection.userid) return; // if owner himself\n\n        var li = document.createElement('li');\n        li.innerHTML = '<b>' + moderator.userid + '</b>&nbsp;&nbsp;';\n\n        var button = document.createElement('button');\n        button.id = moderator.userid;\n        button.onclick = function() {\n          this.disabled = true;\n          connection.join(this.id);\n        };\n        button.innerHTML = 'Join this room';\n        li.appendChild(button);\n\n        if(moderator.userid == connection.sessionid) {\n          // if already connected with same moderator\n          button.disabled = true;\n        }\n\n        publicRoomsDiv.insertBefore(li, publicRoomsDiv.firstChild);\n      });\n      setTimeout(looper, 3000);\n    });\n  })();\n\n  function disableInputButtons() {\n    document.getElementById('open-public-room').disabled = true;\n    document.getElementById('open-private-room').disabled = true;\n    document.getElementById('room-id').disabled = true;\n  }\n\n  // ......................................................\n  // ......................Handling Room-ID................\n  // ......................................................\n\n  function showRoomURL(roomid) {\n    var roomHashURL = '#' + roomid;\n    var roomQueryStringURL = '?roomid=' + roomid;\n\n    var html = '<h2>Unique URL for your room:</h2><br>';\n\n    html += 'Hash URL: <a href=\"' + roomHashURL + '\" target=\"_blank\">' + roomHashURL + '</a>';\n    html += '<br>';\n    html += 'QueryString URL: <a href=\"' + roomQueryStringURL + '\" target=\"_blank\">' + roomQueryStringURL + '</a>';\n\n    var roomURLsDiv = document.getElementById('room-urls');\n    roomURLsDiv.innerHTML = html;\n\n    roomURLsDiv.style.display = 'block';\n  }\n\n  (function() {\n    var params = {},\n    r = /([^&=]+)=?([^&]*)/g;\n\n    function d(s) {\n      return decodeURIComponent(s.replace(/\\+/g, ' '));\n    }\n    var match, search = window.location.search;\n    while (match = r.exec(search.substring(1)))\n    params[d(match[1])] = d(match[2]);\n    window.params = params;\n  })();\n\n  var roomid = '';\n  if (localStorage.getItem(connection.socketMessageEvent)) {\n    roomid = localStorage.getItem(connection.socketMessageEvent);\n  } else {\n    roomid = connection.token();\n  }\n  document.getElementById('room-id').value = roomid;\n  document.getElementById('room-id').onkeyup = function() {\n    localStorage.setItem(connection.socketMessageEvent, this.value);\n  };\n\n  var hashString = location.hash.replace('#', '');\n  if(hashString.length && hashString.indexOf('comment-') == 0) {\n    hashString = '';\n  }\n\n  var roomid = params.roomid;\n  if(!roomid && hashString.length) {\n    roomid = hashString;\n  }\n\n  if(roomid && roomid.length) {\n    document.getElementById('room-id').value = roomid;\n    localStorage.setItem(connection.socketMessageEvent, roomid);\n\n    // auto-join-room\n    (function reCheckRoomPresence() {\n      connection.checkPresence(roomid, function(isRoomExists) {\n        if(isRoomExists) {\n          connection.join(roomid);\n          return;\n        }\n\n        setTimeout(reCheckRoomPresence, 5000);\n      });\n    })();\n\n    disableInputButtons();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/assets/scripts/sockets/Socket.js","var Socket = require('./sockets/Socket');\n\nSocket();\n// window.socket = Socket();\n\n\n\n// WEBPACK FOOTER //\n// ./public/assets/scripts/App.js"],"sourceRoot":""}